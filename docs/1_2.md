# 1주차_데이터베이스와 JPA

# 이번 주제

* 데이터베이스는 무엇이고 어떤 종류가 있나요?  또, 관계형 데이터베이스란 무엇인가요?
* ORM이란 무엇일까요? 스프링에서 ORM을 어떻게 이용할 수 있을까요?
* Entity의 생명주기는 어떻게 되고, 관련 어노테이션은 무엇이 있나요?
* 연관관계 매핑은 무엇이고 어떻게 이용할 수 있을까요?


# 발표 내용

## 데이터베이스는 무엇이고 어떤 종류가 있나요? 또, 관계형 데이터베이스란 무엇인가요?


1. 데이터베이스는 왜 필요할까요?
> 데이터베이스 이전엔 파일 시스템으로 데이터를 관리했으나 파일이 중복될 수 있는 등 여러 단점이 존재했다. 이를 해결하기 위해 등장한 것이 데이터베이스이다.
>
>데이터베이스는 간단하게 말해 공유할 수 있는 데이터의 저장소이다. 또한 데이터베이스를 관리하기 위한 시스템을 DBMS(데이터베이스 관리 시스템)이라 부른다. 데이터베이스는 DBMS를 통해 쉽게 중복을 제거하거나 필요한 형태로 가공할 수 있다. 이외에도 권한을 통한 보안 관리나 데이터의 일관성을 유지하는 등, 거대한 데이터를 한 번에 관리하기 용이하다.
2. 데이터베이스에는 무슨 종류가 있나요?
> 데이터는 크게 RDB와 NoSQL로 나뉜다. MySQL로 대표되는 RDB는 열과 행으로 구분되며 각 table에서 Primary Key로 구분되고 있다. 데이터의 구조가 잘 지켜지고 있는 형태이다.
>
> 반면 NoSQL은 기존 RDB에서 벗어나고자 하는 형태로 스키마와 같은 정해진 데이터 구조가 없다. 주로 key-value 형태로 데이터를 저장하며 MongoDB가 대표적이다.
> 
> 이외에도 '그래프 데이터베이스'나 '시계열 데이터베이스'와 같은 형태도 존재한다.
3. 관계형 데이터베이스를 어떻게 표현할 수 있을까요?

   1. ERD란 무엇일까요?

      1. ERD의 요소에는 무엇이 있나요?
      > ERD는 관계형 데이터베이스를 표현하기 위한 다이어그램이다. 관계형 데이터베이스에서 데이터의 테이블을 Entity(객체)로, 데이터 연결을 Relationship(관계)으로 표현한다. 관계에는 Key와 같은 데이터의 사용도 표시되어 있어 전체적인 구조를 파악하는 데 용이하다.

## ORM은 무엇일까요? 스프링에서 ORM을 어떻게 이용할 수 있을까요?


1. ORM은 무엇이고 왜 필요할까요?
> ORM은 객체와 DB 테이블을 자동으로 연결해 객체와 같이 관계형 데이터베이스를 사용할 수 있게 해주는 기술이다. SQL문을 직접 작성하고 연결하는 것이 아닌, 메서드를 통해 데이터베이스를 관리할 수 있어 코드 측면에서 가독성과 생산성이 올라간다. 또한 기존 관계형 데이터베이스보다 더 객체 지향적인 관점으로 데이터베이스를 관리하고 사용할 수 있다.
2. 스프링에서 ORM을 어떻게 활용하나요?

   1. Spring Data JPA란 무엇일까요?
   > JPA는 자바를 위한 ORM API인데 Spring Data JPA는 이를 더 추상화한 Repository를 제공한다. Spring에서는 Repository를 활용해 JPA와 데이터베이스를 더 쉽게 사용하고 접근할 수 있다. 물론 필요하다면 Spring Data JPA를 통하지 않고 직접 JPA를 활용할 수 도 있을 것이다.
   2. Repository Layer란 무엇일까요?
   > Repository Layer는 비지니스 로직과 데이터 사이에서 layer로서 구분하는 역할을 한다. 둘을 각각의 객체처럼 분리시킴으로서 비지니스 로직은 비지니스 로직대로, 데이터는 데이터대로 집중할 수 있게 도와준다. 메서드의 세세한 부분이 바뀌어도 기능이 같다면 상관없는 것 처럼 말이다.
   3. JpaRepository Interface에는 어떤 기능들이 포함되어 있나요?
   > JpaRepository Interface는 추상화된 Interface 답게 DB 사용을 위한 기능을 메서드로 제공한다. 가장 기본적인 CRUD(create, read, update, delete)는 물론 가능하며 퀴리를 동적으로 생성하는 것도 가능하다. 어디서 어떤 걸 찾을지 문법을 세세하게 지켜서 SQL문을 작성해야 하는 작업을 필요한 메서드를 골라서 쉽게 사용할 수 있는 것이다.

## Entity는 무엇이고 생명주기는 어떻게 되나요? 관련 어노테이션은 무엇이 있을까요?


1. Entity는 무엇인가요?
> 다양한 곳에서 사용되는 Entity란 용어는 DB에서 업무에 필요한 정보가 담긴 table을 말한다. 특히 각 데이터가 Primary Key에 의해 고유하게 구분할 수 있어야 한다. Entity는 여러 attribute(속성)을 가지고 다른 Entity와 관계를 가지고 있어야 하기도 한다.
2. 영속성은 무엇일까요?
> '영속성'이란 데이터가 생성한 프로그램이 종료되어도 사라지지 않고 남아있는 것을 말한다.
   1. Entity의 생명주기는 어떻게 되나요?
> Entity의 영속성과 관련된 상태는 총 4가지로 나뉜다. 우선 Entity가 생성되면 비영속으로 영속성을 지니지 않는다. 영속성 컨텍스트에 등록된 Entity는 영속성을 지니고 보존된다. 영속성을 지닌 Entity는 필요에 따라 삭제되거나, 영속성 컨텍스트로부터 분리될 수 있다. 분리된 엔티티는 영속성의 기능을 잃지만 다시 영속성 컨텍스트에 등록되어 영속성을 가질 수 있다.
   2. Entity에 관련된 어노테이션은 무엇이 있나요?
> Entity에 관련된 어노테이션은 매우 많다. 그렇기 때문에 기본적인 몇가지 만 소개하고자 한다.
> 
> @Entity: 클래스를 엔티티 클래스로 지정
> 
> @Table: 클래스를 매핑할 테이블로 지정
>
> @Column: 클래스의 필드를 테이블로 지정
> 
> @Id: 클래스의 필드를 Pripary Key로 지정


## 연관관계 매핑은 무엇이고 어떻게 이용할 수 있을까요?


1. 연관관계 매핑은 왜 이용할까요?
> 연관관계 매핑은 객체의 참조와 테이블의 외래키를 매핑하는 것이다. 연관관계 매핑은 객체, 즉 Entity를 고려해 이루어지는 것이다. 외래키로 table을 찾을 땐 검색과정에서 거처가는 중간 Entity를 계속 거쳐가면서 불필요한 table 탐색과 Entity 저장을 하게된다. 따라서 참조를 사용할 경우 추가로 찾는 과정 없이 필요한 table을 찾아 사용할 수 있는 것이다.
2. 연관관계 매핑에는 무엇이 있을까요?
> 연관관계 매핑은 방향에 따라 단방향과 양방향으로 나뉜다. 단방향은 한 쪽이 다른 한쪽을 참조하는 경우, 양방향은 서로가 서로를 참조하는 경우를 말한다.
>
> 방향 뿐만 아니라 참조하는 수에 따라 일대일, 일대다, 다대일, 다대다로 나뉜다. 참조하는 수는 어느정도 상대적이기 때문에 객체 입장에서 다대일이 될 수도, 일대다가 될 수도 있다.
> 
> 양방향 매핑이 이루어지는 경우 양쪽 다 각자의 외래키를 가지고 있기 때문에 관리를 용이하기 하기 위해 연관관계의 주인을 설정한다. 

3. 영속성 전이는 무엇이고 어떻게 활용할 수 있을까요?
> 어떤 Entity를 영속성을 가지게 만들 때, 연관된 다른 Entity도 함께 영속성을 가지게 만드는 것을 영속성 전이라고 한다.
> 연관된 경우 함께 다루면 좋은 Entity도 한번에 영속성을 부여하는 것이다.
> 
> 다대일(@ManyToOne), 일대다(@OneToMany) 매핑에서 cascade 옵션을 사용할 경우 영속성 전이 기능을 사용할 수 있다.

# 이번 과제


> ERD를 작성하며 데이터베이스를 설계해보고 Entity 객체와 Repository Layer를 구성해보는 시간을 가져요

# 같이 고민해봐요
> Entity Class를 깔끔하게 구현해봅시다. 다음과 같은 이유를 생각해보며 클래스를 구현해봐요 1. Setter는 왜 지양해야 할까요? 2. 기본 생성자의 접근 지정자를 제한하는게 좋습니다. 이유가 뭘까요? 또, 어떻게 접근 지정자를 제한할 수 있을까요? 3. 객체를 생성하는 다양한 방법이 있습니다. 생성자, 팩토리 메서드, 빌더 패턴이 있는데 이 패턴들은 무엇이고 각자 어떤 장단점이 있을까요?